[{"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\index.js":"1","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\App.js":"2","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\reportWebVitals.js":"3","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\Header.js":"4","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\PokemonSupDetailView.js":"5","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\PokemonList.js":"6","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\Leaderboard.js":"7","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\Game.js":"8","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\PokemonCard.js":"9","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\VantaFog.js":"10","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\GameContext.js":"11"},{"size":707,"mtime":1607697554656,"results":"12","hashOfConfig":"13"},{"size":713,"mtime":1607695934687,"results":"14","hashOfConfig":"13"},{"size":375,"mtime":1607693475175,"results":"15","hashOfConfig":"13"},{"size":368,"mtime":1607703624105,"results":"16","hashOfConfig":"13"},{"size":805,"mtime":1607693475170,"results":"17","hashOfConfig":"13"},{"size":1459,"mtime":1607719965665,"results":"18","hashOfConfig":"13"},{"size":1043,"mtime":1607693475169,"results":"19","hashOfConfig":"13"},{"size":4975,"mtime":1607700325492,"results":"20","hashOfConfig":"13"},{"size":1904,"mtime":1607693475170,"results":"21","hashOfConfig":"13"},{"size":623,"mtime":1607693475170,"results":"22","hashOfConfig":"13"},{"size":568,"mtime":1607697957010,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"1i4fwar",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"26"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\index.js",[],["49","50"],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\App.js",[],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\reportWebVitals.js",[],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\Header.js",[],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\PokemonSupDetailView.js",[],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\PokemonList.js",[],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\Leaderboard.js",[],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\Game.js",["51"],"import React, { useState, useEffect, useContext } from \"react\";\r\nimport { GameContext } from \"./GameContext\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport PokemonCard from \"./PokemonCard\";\r\nimport VantaFog from \"./VantaFog\";\r\nimport Header from \"./Header.js\";\r\n\r\nexport default function Game() {\r\n  const { updateGameText } = useContext(GameContext);\r\n  const [pokemonOne, setPokemonOne] = useState({});\r\n  const [pokemonTwo, setPokemonTwo] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const { id } = useParams();\r\n  const randomId = Math.floor(Math.random() * 809);\r\n\r\n  // FETCH POKEMON (get request) AND GAME RESULT (post request)\r\n  useEffect(() => {\r\n    if (\r\n      typeof pokemonOne.name !== \"undefined\" &&\r\n      typeof pokemonTwo.name !== \"undefined\"\r\n    ) {\r\n      setLoading(false);\r\n    }\r\n  }, [pokemonOne, pokemonTwo]);\r\n\r\n  useEffect(() => {\r\n    getPokemonOne();\r\n    getPokemonTwo();\r\n  }, []);\r\n\r\n  const getPokemonOne = () => {\r\n    fetch(`https://pokefighten.herokuapp.com/pokemon/${id}`)\r\n      .then((response) => response.json())\r\n      .then((response) => {\r\n        setPokemonOne(response);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const getPokemonTwo = () => {\r\n    fetch(`https://pokefighten.herokuapp.com/pokemon/${randomId}`)\r\n      .then((response) => response.json())\r\n      .then((response) => {\r\n        setPokemonTwo(response);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  const sendGameResult = () => {\r\n    fetch(`https://pokefighten.herokuapp.com/game/save`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(gameData),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.json())\r\n      // .then((res) => console.log(res))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  //GAME LOGIC\r\n  let current_attacking_player = 0;\r\n  let current_defending_player = 1;\r\n  let turns_left = 10;\r\n  let players = [];\r\n  let gameData = {};\r\n\r\n  if (!loading) {\r\n    if (pokemonOne.base.Speed >= pokemonTwo.base.Speed) {\r\n      players = [\r\n        JSON.parse(JSON.stringify(pokemonOne)),\r\n        JSON.parse(JSON.stringify(pokemonTwo)),\r\n      ];\r\n    } else {\r\n      players = [\r\n        JSON.parse(JSON.stringify(pokemonTwo)),\r\n        JSON.parse(JSON.stringify(pokemonOne)),\r\n      ];\r\n    }\r\n  }\r\n\r\n  function fakeAnimationPause() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => resolve(), 2000);\r\n    });\r\n  }\r\n\r\n  const attack = async () => {\r\n    if (\r\n      turns_left > 0 &&\r\n      players[current_defending_player].base.HP > 0 &&\r\n      players[current_attacking_player].base.HP > 0\r\n    ) {\r\n      // computation and setting of attack, HP values etc.\r\n      players[current_defending_player].base.HP =\r\n        players[current_defending_player].base.HP +\r\n        players[current_defending_player].base.Defense -\r\n        players[current_attacking_player].base.Attack;\r\n\r\n      // take a break for animation\r\n      await fakeAnimationPause();\r\n      updateGameText(\r\n        `${players[current_attacking_player].name.english} is attacking with power of ${players[current_attacking_player].base.Attack}`\r\n      );\r\n      updateGameText(\r\n        `HP ${players[current_defending_player].name.english}: ${players[current_defending_player].base.HP}`\r\n      );\r\n\r\n      // update game conditions\r\n      turns_left--;\r\n      current_attacking_player = current_attacking_player === 0 ? 1 : 0;\r\n      current_defending_player = current_attacking_player === 0 ? 1 : 0;\r\n      attack();\r\n    } else {\r\n      let gameResult;\r\n\r\n      if (turns_left === 0) {\r\n        gameResult = \"tie\";\r\n        updateGameText(\"It's a tie!\");\r\n      } else {\r\n        gameResult =\r\n          players[current_attacking_player].base.HP > 0\r\n            ? players[current_attacking_player].name.english\r\n            : players[current_defending_player].name.english;\r\n        updateGameText(`${gameResult} wins!`);\r\n      }\r\n\r\n      gameData = {\r\n        pokemon_one: pokemonOne.name.english,\r\n        pokemon_two: pokemonTwo.name.english,\r\n        number_of_rounds: Math.ceil((10 - turns_left) / 2),\r\n        result: gameResult,\r\n      };\r\n      sendGameResult();\r\n    }\r\n  };\r\n\r\n  // RENDER\r\n  if (loading) {\r\n    return <div className=\"spinner\"></div>;\r\n  } else {\r\n    return (\r\n      <div>\r\n        <VantaFog />\r\n        <Header />\r\n        <button className=\"fight-button\" onClick={attack}>\r\n          START FIGHT\r\n        </button>\r\n\r\n        <ul>\r\n          <PokemonCard\r\n            id={pokemonOne.id}\r\n            name={pokemonOne.name}\r\n            type={pokemonOne.type}\r\n            base={pokemonOne.base}\r\n            origin=\"game\"\r\n          />\r\n          <PokemonCard\r\n            id={pokemonTwo.id}\r\n            name={pokemonTwo.name}\r\n            type={pokemonTwo.type}\r\n            base={pokemonTwo.base}\r\n            origin=\"game\"\r\n          />\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\PokemonCard.js",[],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\VantaFog.js",[],["52","53"],"C:\\Users\\azlat\\Desktop\\WBS Coding school\\week11\\pokefight\\pokefight-client\\src\\GameContext.js",[],{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","replacedBy":"57"},{"ruleId":"58","severity":1,"message":"59","line":29,"column":6,"nodeType":"60","endLine":29,"endColumn":8,"suggestions":"61"},{"ruleId":"54","replacedBy":"62"},{"ruleId":"56","replacedBy":"63"},"no-native-reassign",["64"],"no-negated-in-lhs",["65"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'getPokemonOne' and 'getPokemonTwo'. Either include them or remove the dependency array.","ArrayExpression",["66"],["64"],["65"],"no-global-assign","no-unsafe-negation",{"desc":"67","fix":"68"},"Update the dependencies array to be: [getPokemonOne, getPokemonTwo]",{"range":"69","text":"70"},[941,943],"[getPokemonOne, getPokemonTwo]"]